<!-- 
  Call-to-Action (CTA) Section Component
  
  A flexible, accessible CTA section that can be used for lead generation,
  newsletter signups, product promotions, or any conversion-focused content.
  
  Usage Examples:
  
  Basic CTA:
  <section class="cta-section">
    <div class="cta-section__content">
      <h2 class="cta-section__title">Ready to get started?</h2>
      <p class="cta-section__description">Join thousands of users already using our platform.</p>
      <a href="/signup" class="cta-section__button">Get Started Today</a>
    </div>
  </section>
  
  CTA with form:
  <section class="cta-section cta-section--form">
    <div class="cta-section__content">
      <h2 class="cta-section__title">Stay Updated</h2>
      <p class="cta-section__description">Get the latest news and updates delivered to your inbox.</p>
      <form class="cta-section__form" action="/subscribe" method="post">
        <div class="cta-section__form-group">
          <label for="email" class="sr-only">Email address</label>
          <input type="email" id="email" name="email" placeholder="Enter your email" required>
          <button type="submit">Subscribe</button>
        </div>
      </form>
    </div>
  </section>
  
  CTA with background image:
  <section class="cta-section cta-section--hero" style="--cta-bg-image: url('background.jpg')">
    <div class="cta-section__content">
      <h2 class="cta-section__title">Transform Your Business</h2>
      <p class="cta-section__description">Discover how our solutions can help you achieve your goals.</p>
      <div class="cta-section__actions">
        <a href="/demo" class="cta-section__button cta-section__button--primary">Book Demo</a>
        <a href="/learn-more" class="cta-section__button cta-section__button--secondary">Learn More</a>
      </div>
    </div>
  </section>
-->

<section 
  class="cta-section" 
  role="region" 
  aria-labelledby="cta-title"
>
  <div class="cta-section__container">
    <div class="cta-section__content">
      <!-- Main headline -->
      <h2 id="cta-title" class="cta-section__title">
        Ready to Transform Your Business?
      </h2>
      
      <!-- Supporting description -->
      <p class="cta-section__description">
        Join thousands of companies already using our platform to streamline their operations and drive growth. Start your free trial today.
      </p>
      
      <!-- Call-to-action buttons -->
      <div class="cta-section__actions">
        <a 
          href="/get-started" 
          class="cta-section__button cta-section__button--primary"
          role="button"
        >
          Start Free Trial
        </a>
        
        <a 
          href="/demo" 
          class="cta-section__button cta-section__button--secondary"
          role="button"
        >
          Schedule Demo
        </a>
      </div>
      
      <!-- Optional trust indicators -->
      <div class="cta-section__trust">
        <p class="cta-section__trust-text">
          <span class="cta-section__trust-icon" aria-hidden="true">✓</span>
          No credit card required
        </p>
        <p class="cta-section__trust-text">
          <span class="cta-section__trust-icon" aria-hidden="true">✓</span>
          14-day free trial
        </p>
        <p class="cta-section__trust-text">
          <span class="cta-section__trust-icon" aria-hidden="true">✓</span>
          Cancel anytime
        </p>
      </div>
    </div>
    
    <!-- Optional visual element -->
    <div class="cta-section__visual" aria-hidden="true">
      <div class="cta-section__decoration"></div>
    </div>
  </div>
</section>

<style>
  .cta-section {
    /* CSS Custom Properties for theming */
    --cta-background: linear-gradient(135deg, var(--color-primary, #2563eb) 0%, var(--color-accent, #f59e0b) 100%);
    --cta-text-color: white;
    --cta-title-color: white;
    --cta-description-color: rgba(255, 255, 255, 0.9);
    --cta-padding-y: var(--spacing-2xl, 3rem);
    --cta-padding-x: var(--spacing-lg, 1.5rem);
    --cta-border-radius: var(--border-radius-xl, 0.75rem);
    --cta-gap: var(--spacing-lg, 1.5rem);
    
    /* Typography */
    --cta-title-size: var(--font-size-3xl, 1.875rem);
    --cta-title-weight: var(--font-weight-bold, 700);
    --cta-description-size: var(--font-size-lg, 1.125rem);
    --cta-trust-size: var(--font-size-sm, 0.875rem);
    
    background: var(--cta-background);
    color: var(--cta-text-color);
    padding: var(--cta-padding-y) var(--cta-padding-x);
    border-radius: var(--cta-border-radius);
    position: relative;
    overflow: hidden;
    font-family: var(--font-family-primary, system-ui, -apple-system, sans-serif);
  }
  
  .cta-section__container {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--cta-gap);
    align-items: center;
    position: relative;
    z-index: 1;
  }
  
  .cta-section__content {
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: var(--cta-gap);
    align-items: center;
  }
  
  .cta-section__title {
    margin: 0;
    color: var(--cta-title-color);
    font-size: var(--cta-title-size);
    font-weight: var(--cta-title-weight);
    line-height: 1.2;
    max-width: 600px;
  }
  
  .cta-section__description {
    margin: 0;
    color: var(--cta-description-color);
    font-size: var(--cta-description-size);
    line-height: 1.5;
    max-width: 500px;
  }
  
  .cta-section__actions {
    display: flex;
    gap: var(--spacing-md, 1rem);
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
  }
  
  .cta-section__button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs, 0.25rem);
    padding: var(--spacing-md, 1rem) var(--spacing-xl, 2rem);
    border: 2px solid transparent;
    border-radius: var(--border-radius-lg, 0.5rem);
    font-size: var(--font-size-base, 1rem);
    font-weight: var(--font-weight-semibold, 600);
    text-decoration: none;
    cursor: pointer;
    transition: all var(--transition-base, 0.2s ease);
    min-height: 3rem;
    white-space: nowrap;
  }
  
  .cta-section__button--primary {
    background: white;
    color: var(--color-primary, #2563eb);
    border-color: white;
  }
  
  .cta-section__button--primary:hover {
    background: var(--color-surface, #f8fafc);
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }
  
  .cta-section__button--secondary {
    background: transparent;
    color: white;
    border-color: white;
  }
  
  .cta-section__button--secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
  }
  
  .cta-section__button:focus {
    outline: 2px solid white;
    outline-offset: 2px;
  }
  
  .cta-section__trust {
    display: flex;
    gap: var(--spacing-md, 1rem);
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    margin-top: var(--spacing-sm, 0.5rem);
  }
  
  .cta-section__trust-text {
    margin: 0;
    color: var(--cta-description-color);
    font-size: var(--cta-trust-size);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs, 0.25rem);
  }
  
  .cta-section__trust-icon {
    font-weight: bold;
    color: var(--color-success, #16a34a);
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 1.25rem;
    height: 1.25rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
  }
  
  .cta-section__visual {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    height: 100%;
    opacity: 0.1;
    pointer-events: none;
  }
  
  .cta-section__decoration {
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    animation: cta-decoration-rotate 20s linear infinite;
  }
  
  /* Style variants */
  .cta-section--compact {
    --cta-padding-y: var(--spacing-xl, 2rem);
    --cta-gap: var(--spacing-md, 1rem);
    --cta-title-size: var(--font-size-2xl, 1.5rem);
  }
  
  .cta-section--spacious {
    --cta-padding-y: 4rem;
    --cta-gap: var(--spacing-2xl, 3rem);
    --cta-title-size: 2.5rem;
  }
  
  .cta-section--centered {
    text-align: center;
  }
  
  .cta-section--left {
    text-align: left;
  }
  
  .cta-section--left .cta-section__content {
    align-items: flex-start;
  }
  
  .cta-section--left .cta-section__actions {
    justify-content: flex-start;
  }
  
  .cta-section--left .cta-section__trust {
    justify-content: flex-start;
  }
  
  /* Color variants */
  .cta-section--primary {
    --cta-background: var(--color-primary, #2563eb);
  }
  
  .cta-section--secondary {
    --cta-background: var(--color-secondary, #64748b);
  }
  
  .cta-section--accent {
    --cta-background: var(--color-accent, #f59e0b);
  }
  
  .cta-section--dark {
    --cta-background: var(--color-text, #1e293b);
  }
  
  .cta-section--light {
    --cta-background: var(--color-surface, #f8fafc);
    --cta-text-color: var(--color-text, #1e293b);
    --cta-title-color: var(--color-text, #1e293b);
    --cta-description-color: var(--color-text-muted, #64748b);
  }
  
  .cta-section--light .cta-section__button--primary {
    background: var(--color-primary, #2563eb);
    color: white;
    border-color: var(--color-primary, #2563eb);
  }
  
  .cta-section--light .cta-section__button--secondary {
    background: transparent;
    color: var(--color-text, #1e293b);
    border-color: var(--color-border, #e2e8f0);
  }
  
  .cta-section--light .cta-section__trust-icon {
    background: var(--color-success, #16a34a);
    color: white;
  }
  
  /* Form variant */
  .cta-section--form .cta-section__form {
    width: 100%;
    max-width: 500px;
  }
  
  .cta-section__form-group {
    display: flex;
    gap: var(--spacing-sm, 0.5rem);
    align-items: stretch;
  }
  
  .cta-section__form-group input {
    flex: 1;
    padding: var(--spacing-md, 1rem);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--border-radius-lg, 0.5rem);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: var(--font-size-base, 1rem);
  }
  
  .cta-section__form-group input::placeholder {
    color: rgba(255, 255, 255, 0.7);
  }
  
  .cta-section__form-group input:focus {
    outline: none;
    border-color: white;
    background: rgba(255, 255, 255, 0.2);
  }
  
  .cta-section__form-group button {
    padding: var(--spacing-md, 1rem) var(--spacing-lg, 1.5rem);
    border: 2px solid white;
    border-radius: var(--border-radius-lg, 0.5rem);
    background: white;
    color: var(--color-primary, #2563eb);
    font-size: var(--font-size-base, 1rem);
    font-weight: var(--font-weight-semibold, 600);
    cursor: pointer;
    transition: all var(--transition-base, 0.2s ease);
    white-space: nowrap;
  }
  
  .cta-section__form-group button:hover {
    background: var(--color-surface, #f8fafc);
    transform: translateY(-1px);
  }
  
  /* Background image variant */
  .cta-section--hero {
    background-image: var(--cta-bg-image);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }
  
  .cta-section--hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 0;
  }
  
  /* Grid layout for larger screens */
  @media (min-width: 768px) {
    .cta-section__container {
      grid-template-columns: 2fr 1fr;
    }
    
    .cta-section--centered .cta-section__container {
      grid-template-columns: 1fr;
    }
    
    .cta-section__actions {
      flex-wrap: nowrap;
    }
    
    .cta-section__trust {
      flex-wrap: nowrap;
    }
    
    .cta-section__form-group {
      gap: var(--spacing-md, 1rem);
    }
  }
  
  /* Responsive design */
  @media (max-width: 640px) {
    .cta-section {
      --cta-padding-x: var(--spacing-md, 1rem);
      --cta-title-size: var(--font-size-2xl, 1.5rem);
    }
    
    .cta-section__actions {
      flex-direction: column;
      width: 100%;
    }
    
    .cta-section__button {
      width: 100%;
    }
    
    .cta-section__trust {
      flex-direction: column;
      gap: var(--spacing-sm, 0.5rem);
    }
    
    .cta-section__form-group {
      flex-direction: column;
    }
    
    .cta-section__form-group button {
      width: 100%;
    }
  }
  
  /* Animations */
  @keyframes cta-decoration-rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .cta-section__button {
      transition: none;
    }
    
    .cta-section__button:hover {
      transform: none;
    }
    
    .cta-section__decoration {
      animation: none;
    }
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .cta-section {
      --cta-background: ButtonFace;
      --cta-text-color: ButtonText;
      border: 2px solid ButtonText;
    }
    
    .cta-section__button {
      border-width: 2px;
    }
  }
  
  /* Print styles */
  @media print {
    .cta-section {
      background: white !important;
      color: black !important;
      border: 2px solid black;
    }
    
    .cta-section__visual,
    .cta-section__decoration {
      display: none;
    }
  }
</style>

<script>
  // CTA Section Component JavaScript
  (function() {
    'use strict';
    
    class CTASection {
      constructor(element) {
        this.element = element;
        this.form = element.querySelector('.cta-section__form');
        this.buttons = element.querySelectorAll('.cta-section__button');
        
        this.init();
      }
      
      init() {
        this.setupFormHandling();
        this.setupButtonAnalytics();
        this.setupAccessibility();
      }
      
      setupFormHandling() {
        if (this.form) {
          this.form.addEventListener('submit', this.handleFormSubmit.bind(this));
          
          // Enhance form validation
          const emailInput = this.form.querySelector('input[type="email"]');
          if (emailInput) {
            emailInput.addEventListener('blur', this.validateEmail.bind(this));
          }
        }
      }
      
      setupButtonAnalytics() {
        this.buttons.forEach((button, index) => {
          button.addEventListener('click', (event) => {
            // Track CTA clicks for analytics
            this.trackCTAClick(button, index);
          });
        });
      }
      
      setupAccessibility() {
        // Ensure proper ARIA attributes
        const title = this.element.querySelector('.cta-section__title');
        if (title && !this.element.getAttribute('aria-labelledby')) {
          if (!title.id) {
            title.id = `cta-title-${Date.now()}`;
          }
          this.element.setAttribute('aria-labelledby', title.id);
        }
      }
      
      handleFormSubmit(event) {
        event.preventDefault();
        
        const formData = new FormData(this.form);
        const email = formData.get('email');
        
        if (!this.validateEmail({ target: { value: email } })) {
          return;
        }
        
        this.setLoading(true);
        
        // Submit form data (replace with actual API call)
        this.submitForm(formData)
          .then(response => {
            this.showSuccess('Thank you for subscribing!');
            this.form.reset();
          })
          .catch(error => {
            this.showError('Something went wrong. Please try again.');
          })
          .finally(() => {
            this.setLoading(false);
          });
      }
      
      validateEmail(event) {
        const email = event.target.value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (email && !emailRegex.test(email)) {
          this.showInputError(event.target, 'Please enter a valid email address');
          return false;
        } else {
          this.clearInputError(event.target);
          return true;
        }
      }
      
      showInputError(input, message) {
        // Remove existing error
        this.clearInputError(input);
        
        // Add error styling
        input.classList.add('error');
        input.setAttribute('aria-invalid', 'true');
        
        // Create error message
        const errorElement = document.createElement('div');
        errorElement.className = 'cta-section__error';
        errorElement.textContent = message;
        errorElement.id = `${input.id || 'input'}-error`;
        
        input.setAttribute('aria-describedby', errorElement.id);
        input.parentNode.appendChild(errorElement);
      }
      
      clearInputError(input) {
        input.classList.remove('error');
        input.removeAttribute('aria-invalid');
        input.removeAttribute('aria-describedby');
        
        const existingError = input.parentNode.querySelector('.cta-section__error');
        if (existingError) {
          existingError.remove();
        }
      }
      
      setLoading(isLoading) {
        const submitButton = this.form?.querySelector('button[type="submit"]');
        
        if (submitButton) {
          submitButton.disabled = isLoading;
          submitButton.textContent = isLoading ? 'Subscribing...' : 'Subscribe';
          submitButton.setAttribute('aria-busy', isLoading.toString());
        }
      }
      
      showSuccess(message) {
        this.showMessage(message, 'success');
      }
      
      showError(message) {
        this.showMessage(message, 'error');
      }
      
      showMessage(message, type) {
        // Remove existing messages
        const existingMessage = this.element.querySelector('.cta-section__message');
        if (existingMessage) {
          existingMessage.remove();
        }
        
        // Create new message
        const messageElement = document.createElement('div');
        messageElement.className = `cta-section__message cta-section__message--${type}`;
        messageElement.textContent = message;
        messageElement.setAttribute('role', type === 'error' ? 'alert' : 'status');
        messageElement.setAttribute('aria-live', 'polite');
        
        // Insert after form or actions
        const insertAfter = this.form || this.element.querySelector('.cta-section__actions');
        if (insertAfter) {
          insertAfter.parentNode.insertBefore(messageElement, insertAfter.nextSibling);
        }
        
        // Auto-remove success messages
        if (type === 'success') {
          setTimeout(() => {
            messageElement.remove();
          }, 5000);
        }
      }
      
      async submitForm(formData) {
        // Replace with actual API endpoint
        const response = await fetch('/api/subscribe', {
          method: 'POST',
          body: formData
        });
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        return response.json();
      }
      
      trackCTAClick(button, index) {
        // Analytics tracking (replace with your analytics provider)
        if (typeof gtag !== 'undefined') {
          gtag('event', 'cta_click', {
            event_category: 'CTA',
            event_label: button.textContent,
            value: index
          });
        }
        
        // Custom event for other tracking systems
        this.element.dispatchEvent(new CustomEvent('cta:click', {
          bubbles: true,
          detail: {
            button: button,
            index: index,
            text: button.textContent
          }
        }));
      }
    }
    
    // Auto-initialize all CTA sections
    function initCTASections() {
      const ctaSections = document.querySelectorAll('.cta-section');
      ctaSections.forEach(section => {
        if (!section._ctaSection) {
          section._ctaSection = new CTASection(section);
        }
      });
    }
    
    // Global API
    window.CTASection = CTASection;
    
    // Auto-initialize on DOM ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initCTASections);
    } else {
      initCTASections();
    }
  })();
</script>

<!-- Additional CSS for form error states and messages -->
<style>
  .cta-section__error {
    color: var(--color-error, #dc2626);
    font-size: var(--font-size-sm, 0.875rem);
    margin-top: var(--spacing-xs, 0.25rem);
    display: block;
  }
  
  .cta-section__form-group input.error {
    border-color: var(--color-error, #dc2626);
    background-color: rgba(220, 38, 38, 0.1);
  }
  
  .cta-section__message {
    padding: var(--spacing-md, 1rem);
    border-radius: var(--border-radius-md, 0.375rem);
    font-size: var(--font-size-sm, 0.875rem);
    font-weight: var(--font-weight-medium, 500);
    margin-top: var(--spacing-md, 1rem);
  }
  
  .cta-section__message--success {
    background: rgba(16, 163, 74, 0.1);
    color: var(--color-success, #16a34a);
    border: 1px solid rgba(16, 163, 74, 0.2);
  }
  
  .cta-section__message--error {
    background: rgba(220, 38, 38, 0.1);
    color: var(--color-error, #dc2626);
    border: 1px solid rgba(220, 38, 38, 0.2);
  }
</style>